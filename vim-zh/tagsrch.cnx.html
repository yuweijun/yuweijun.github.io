<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>~/github.com/yuweijun/yuweijun.github.io/vim-zh/tagsrch.cnx.html</title>
<meta name="Generator" content="Vim/8.2">
<meta name="plugin-version" content="vim8.1_v2">
<meta name="syntax" content="help">
<meta name="settings" content="use_css,pre_wrap,no_foldcolumn,prevent_copy=,use_input_for_pc=fallback">
<meta name="colorscheme" content="molokai">
<style>
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #d0d0d0; background-color: #121212; }
body { font-family: monospace; color: #d0d0d0; background-color: #121212; }
* { font-size: 1em; }
.String { color: #afaf87; }
.Type { color: #5fd7ff; }
.Todo { color: #ffffff; background-color: #080808; padding-bottom: 1px; font-weight: bold; }
.PreProc { color: #87ff00; }
.Identifier { color: #ff8700; }
.Comment { color: #5f5f5f; }
.Special { color: #5fd7ff; }
.Ignore { color: #808080; background-color: #080808; padding-bottom: 1px; }
-->
</style>
</head>
<body>
<pre id='vimCodeElement'>
<span class="Ignore">*</span><span class="String">tagsrch.txt</span><span class="Ignore">*</span>   For <span class="Identifier">Vim version 8.0.</span>  最近更新: 2017年8月


		  VIM 参考手册    by Bram Moolenaar
				译者: Willis
				<span class="String"><a href="http://vimcdoc.sf.net">http://vimcdoc.sf.net</a></span>


标签和特殊搜索						<span class="Ignore">*</span><span class="String">tags-and-searches</span><span class="Ignore">*</span>

用户手册 <span class="Ignore">|</span><span class="Identifier">29.1</span><span class="Ignore">|</span> 有这部分内容的介绍。

1. 跳转到标签			<span class="Ignore">|</span><span class="Identifier">tag-commands</span><span class="Ignore">|</span>
2. 标签栈			<span class="Ignore">|</span><span class="Identifier">tag-stack</span><span class="Ignore">|</span>
3. 标签匹配表			<span class="Ignore">|</span><span class="Identifier">tag-matchlist</span><span class="Ignore">|</span>
4. 标签细节			<span class="Ignore">|</span><span class="Identifier">tag-details</span><span class="Ignore">|</span>
5. 标签文件格式			<span class="Ignore">|</span><span class="Identifier">tags-file-format</span><span class="Ignore">|</span>
6. 头文件搜索			<span class="Ignore">|</span><span class="Identifier">include-search</span><span class="Ignore">|</span>

<span class="PreProc">==============================================================================</span>
1. 跳转到标签						<span class="Ignore">*</span><span class="String">tag-commands</span><span class="Ignore">*</span>

							<span class="Ignore">*</span><span class="String">tag</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">tags</span><span class="Ignore">*</span>
标签是出现在 &quot;tags&quot; 文件的一个标识符。它是一种能够跳转的标记。例如，在 C 程序
里，每个函数名都可以是一个标签。在使用标签文件之前，&quot;tags&quot; 文件由 ctags 这样的
程序生成。

使用 &quot;:tag&quot; 命令移动光标到标签上。使用 <span class="Special">CTRL-]</span> 命令，光标所在的关键字就可用作标
签。如果光标不在关键字上，则使用最右侧的一个关键字。

&quot;:tag&quot; 命令对 C 程序十分有效。如果你看到一个函数的调用而想知道该函数的作用，把
光标移动到函数名上，并按 <span class="Special">CTRL-]</span>。它会把你带到该函数的定义上。简单的，按 <span class="Special">CTRL-T</span>
就可以回去。同时，也请阅读下面关于标签栈的描述。

						<span class="Ignore">*</span><span class="String">:ta</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:tag</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E426</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E429</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>ta[g][!] <span class="Special">{ident}</span>
			根据 tags 文件的信息，跳转到 <span class="Special">{ident}</span> 的定义上。
			把 <span class="Special">{ident}</span> 放在堆栈上。[!] 见 <span class="Ignore">|</span><span class="Identifier">tag-!</span><span class="Ignore">|</span>。
			<span class="Special">{ident}</span> 可以是个正规表达式。见 <span class="Ignore">|</span><span class="Identifier">tag-regexp</span><span class="Ignore">|</span>。
			如果有 <span class="Special">{ident}</span> 的多个匹配，则跳转到它们中的第 <span class="Special">[count]</span>
			个。如果 <span class="Special">[count]</span> 被省略，则跳转到第一个。要跳转到其它
			匹配的标签，参见 <span class="Ignore">|</span><span class="Identifier">tag-matchlist</span><span class="Ignore">|</span>。

g<span class="Special">&lt;LeftMouse&gt;</span>						<span class="Ignore">*</span><span class="String">g&lt;LeftMouse&gt;</span><span class="Ignore">*</span>
<span class="Special">&lt;C-LeftMouse&gt;</span>					<span class="Ignore">*</span><span class="String">&lt;C-LeftMouse&gt;</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">CTRL-]</span><span class="Ignore">*</span>
<span class="Special">CTRL-]</span>			跳转到光标所在的关键字的定义。和 &quot;:tag <span class="Special">{ident}</span>&quot; 相同，
			只不过 <span class="Special">{ident}</span> 是光标之下或者之后的关键字。
			如果有 <span class="Special">{ident}</span> 的多个匹配，则跳转到它们中的第 <span class="Special">[count]</span>
			个。如果没有 <span class="Special">[count]</span>，跳转到第一个。 要跳转到其它匹配
			的标签，参见 <span class="Ignore">|</span><span class="Identifier">tag-matchlist</span><span class="Ignore">|</span>。
			<span class="Special">{Vi: 光标之后的标识符}</span>

							<span class="Ignore">*</span><span class="String">v_CTRL-]</span><span class="Ignore">*</span>
<span class="Special">{Visual}CTRL-]</span>		和 &quot;:tag <span class="Special">{ident}</span>&quot; 相同，其中 <span class="Special">{ident}</span> 是高亮的文本。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">telnet-CTRL-]</span><span class="Ignore">*</span>
<span class="Special">CTRL-]</span> 是缺省的 telnet 转义键。在你按 <span class="Special">CTRL-]</span> 进行标签跳转的时候，你会得到
telnet 的提示符。许多版本的 telnet 允许你改变或者屏蔽缺省的转义键。见 telnet
的手册页。你可以用 'telnet -E <span class="Special">{Hostname}</span>' 来屏蔽转义键，或者用 'telnet -e
<span class="Special">{EscapeCharacter}</span> <span class="Special">{Hostname}</span>' 来指定别的转义键。如果可能，用 &quot;ssh&quot; 来代替
&quot;telnet&quot; 也可解决这个问题。

							<span class="Ignore">*</span><span class="String">tag-priority</span><span class="Ignore">*</span>
如果有标签的多个匹配，使用以下的优先级:
1. &quot;FSC&quot;  当前文件的完整的匹配静态标签。
2. &quot;F C&quot;  当前文件的完整匹配全局标签。
3. &quot;F  &quot;  其他文件的完整匹配全局标签。
4. &quot;FS &quot;  其他文件的完整匹配静态标签。
5. &quot; SC&quot;  当前文件的忽略大小写的匹配静态标签。
6. &quot;  C&quot;  当前文件的忽略大小写匹配全局标签。
7. &quot;   &quot;  其他文件的忽略大小写匹配全局标签。
8. &quot; S &quot;  其他文件的忽略大小写匹配静态标签。

注意 当前文件改变时，优先顺序多数情况下不会改变，以免使 &quot;:tnext&quot; 的使用引起混
淆。在使用 &quot;:tag <span class="Special">{ident}</span>&quot; 时，优先顺序才会改变。

以下情况下，&quot;:tag&quot; 命令不会查找忽略大小写的匹配:
- <span class="Type">'ignorecase'</span> 选项关闭 且 <span class="Type">'tagcase'</span> 为 &quot;followic&quot;
- <span class="Type">'tagcase'</span> 为 &quot;match&quot;
- <span class="Type">'tagcase'</span> 为 &quot;smart&quot; 且模式包含大写字符。
- <span class="Type">'tagcase'</span> 为 &quot;followscs&quot; 且 <span class="Type">'smartcase'</span> 选项打开，且模式包含大写字符。

以下情况下，查找忽略大小写的匹配:
- 使用模式 (以 &quot;/&quot; 开始)
- &quot;:tselect&quot;
- <span class="Type">'tagcase'</span> 为 &quot;followic&quot; 且 <span class="Type">'ignorecase'</span> 关闭 (译者注: 应为打开)
- <span class="Type">'tagcase'</span> 为 &quot;match&quot; (译者注: 应为 &quot;ignore&quot;)
- <span class="Type">'tagcase'</span> 为 &quot;followscs&quot; 且 <span class="Type">'smartcase'</span> 选项关闭

注意 使用忽略大小写查找就无法应用 tags 文件的二分法查找，从而减慢了查找速度。
这可以用大小写合并排序的标签文件来解决。具体解释见 <span class="Type">'tagbsearch'</span> 选项。

<span class="PreProc">==============================================================================</span>
2. 标签栈				<span class="Ignore">*</span><span class="String">tag-stack</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">tagstack</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E425</span><span class="Ignore">*</span>

标签栈记住你跳转过的标签，还有从哪里跳转到这些标签。只有在设置 <span class="Type">'tagstack'</span> 选项
的时候，标签才被压到堆栈里。

g<span class="Special">&lt;RightMouse&gt;</span>						<span class="Ignore">*</span><span class="String">g&lt;RightMouse&gt;</span><span class="Ignore">*</span>
<span class="Special">&lt;C-RightMouse&gt;</span>					<span class="Ignore">*</span><span class="String">&lt;C-RightMouse&gt;</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">CTRL-T</span><span class="Ignore">*</span>
<span class="Special">CTRL-T</span>			跳到标签栈上第 <span class="Special">[count]</span> 个较早的项目 (缺省为 1)。
			<span class="Special">{Vi 无此功能}</span>

						<span class="Ignore">*</span><span class="String">:po</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:pop</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E555</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E556</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>po[p][!]	跳到标签栈上第 <span class="Special">[count]</span> 个较早的项目 (缺省为 1)。
			[!] 见 <span class="Ignore">|</span><span class="Identifier">tag-!</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

:<span class="Special">[count]</span>ta[g][!]	跳到标签栈上第 <span class="Special">[count]</span> 个较新的项目 (缺省为 1)。
			[!] 见 <span class="Ignore">|</span><span class="Identifier">tag-!</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:tags</span><span class="Ignore">*</span>
:tags			显示标签栈的内容。激活的项目以 '&gt;' 标明。<span class="Special">{Vi 无此功能}</span>

&quot;:tags&quot; 的输出结果类似于:

   # TO tag      FROM line in file/text
   1  1 main		 1  harddisk2:text/vim/test
 &gt; 2  2 FuncA		58  i = FuncA(10);
   3  1 FuncC	       357  harddisk2:text/vim/src/amiga.c

该列表显示你跳转到的标签和跳转前光标的位置。较早的项目在顶部，较新的在底部。

'&gt;' 指向活动的项目。这是下一个 &quot;:tag&quot; 命令将使用的标签。<span class="Special">CTRL-T</span> 和 &quot;:pop&quot; 使用
活动项目之上的那项的位置。

&quot;TO&quot; 之下的那列显示匹配表的当前匹配的数目。注意 这不会因为使用 &quot;:pop&quot; 或者
&quot;:tag&quot; 而改变。

记住文件名和行号可以使你回到 tag 命令之前的位置。即使你删除或者插入行，行号也
会保持正确，除非你用别的程序 (比如，另外一个 Vim 的实例) 做这些事。

对于当前文件，&quot;file/text&quot; 列显示该位置的文本。缩进被删除，长行也被截短，以便能
放进窗口里显示。

有若干命令可以让你跳到之前用过的标签。一些例子包括:

	&quot;:pop&quot; 或 <span class="Special">CTRL-T</span>	到上一个标签之前的位置
	<span class="Special">{count}CTRL-T</span>		到第 <span class="Special">{count}</span> 个较早的标签之前的位置
	&quot;:tag&quot;			到更新的标签
	&quot;:0tag&quot;			到前一个使用过的标签

最明显的应用就是浏览程序的调用图。考虑下面的调用图:

	main  ---&gt;  FuncA  ---&gt;  FuncC
	      ---&gt;  FuncB

(解释: main 调用 FuncA 和 FuncB; FuncA 调用 FuncC)。
从 main 到 FuncA，你可以在调用 FuncA 的行上用 <span class="Special">CTRL-]</span>。然后再用 <span class="Special">CTRL-]</span> 跳到
FuncC。如果你现在想跳回到 main，你只需要按 <span class="Special">CTRL-T</span> 两次。然后你可以用 <span class="Special">CTRL-]</span> 到
FuncB。

如果你使用 &quot;:ta <span class="Special">{ident}</span>&quot; 或者 <span class="Special">CTRL-]</span> 命令，该标签被加在栈的当前位置。如果栈已
满 (最多可以容纳 20 项)，最早的项目被删除，较早的项目则依次前移 (索引号分别减
1)。如果最近使用的项目不在底部，它其后的项目都被删除。这意味着调用图上的旧的分
支丢失了。在上面解释的命令执行以后，标签栈看起来像这样:

   # TO tag	FROM line in file/text
   1  1 main		1  harddisk2:text/vim/test
   2  1 FuncB	       59  harddisk2:text/vim/src/main.c

							<span class="Ignore">*</span><span class="String">E73</span><span class="Ignore">*</span>
如果你试图使用标签栈，而其中没有任何内容，你会得到一个错误信息。

<span class="PreProc">==============================================================================</span>
3. 标签匹配表				<span class="Ignore">*</span><span class="String">tag-matchlist</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E427</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E428</span><span class="Ignore">*</span>

如果有多个匹配的标签，这些命令可以用来在它们之间跳转。注意 这些命令不影响标签
栈，它保留原来的项目。

							<span class="Ignore">*</span><span class="String">:ts</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:tselect</span><span class="Ignore">*</span>
:ts[elect][!] <span class="Special">[ident]</span>	根据 tags 文件的信息，列出匹配 <span class="Special">[ident]</span> 的标签。
			如果 <span class="Special">[ident]</span> 没有给出，使用标签栈上最后的标签名。
			第一列的 '&gt;' 指示列表的当前位置 (如果有的话)。
			<span class="Special">[ident]</span> 可以是正规表达式模式，见 <span class="Ignore">|</span><span class="Identifier">tag-regexp</span><span class="Ignore">|</span>。
			列表使用的优先级顺序见 <span class="Ignore">|</span><span class="Identifier">tag-priority</span><span class="Ignore">|</span>。
			<span class="Special">{Vi 无此功能}</span>
			示例输出:

<span class="Ignore">&gt;</span>
<span class="Comment">	 nr pri kind tag		file</span>
<span class="Comment">	  1 F	f    mch_delay		os_amiga.c</span>
<span class="Comment">			mch_delay(msec, ignoreinput)</span>
<span class="Comment">	&gt; 2 F	f    mch_delay		os_msdos.c</span>
<span class="Comment">			mch_delay(msec, ignoreinput)</span>
<span class="Comment">	  3 F	f    mch_delay		os_unix.c</span>
<span class="Comment">			mch_delay(msec, ignoreinput)</span>
<span class="Comment">	Enter nr of choice (&lt;CR&gt; to abort):</span>
<span class="Ignore">&lt;</span>
			&quot;pri&quot; 列见 <span class="Ignore">|</span><span class="Identifier">tag-priority</span><span class="Ignore">|</span>。注意 这决定于当前文件，因而
			&quot;:tselect xxx&quot; 可能会输出不同的结果。
			如果 tags 文件给出标签的类型。&quot;kind&quot; 列输出此信息。
			&quot;info&quot; 列给出 tags 文件找到的信息。这决定于产生 tags
			文件的程序。
			如果列表很长，你可能会看到 <span class="Ignore">|</span><span class="Identifier">more-prompt</span><span class="Ignore">|</span>。如果你已经看
			到要用的标签，按 'q' 并输入那个数字。

							<span class="Ignore">*</span><span class="String">:sts</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:stselect</span><span class="Ignore">*</span>
:sts[elect][!] <span class="Special">[ident]</span>	&quot;:tselect[!] <span class="Special">[ident]</span>&quot; 并分割窗口以显示选择的标签。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">g]</span><span class="Ignore">*</span>
g]			类似于 <span class="Special">CTRL-]</span>，但使用 &quot;:tselect&quot; 而不是 &quot;:tag&quot;。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">v_g]</span><span class="Ignore">*</span>
<span class="Special">{Visual}</span>g]		和 &quot;g]&quot; 相同，但使用高亮文本作为标识符。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:tj</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:tjump</span><span class="Ignore">*</span>
:tj[ump][!] <span class="Special">[ident]</span>	类似于 &quot;:tselect&quot;，但如果只有一个匹配，直接跳转之。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:stj</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:stjump</span><span class="Ignore">*</span>
:stj[ump][!] <span class="Special">[ident]</span>	&quot;:tjump[!] <span class="Special">[ident]</span>&quot; 并分割窗口以显示选择的标签。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">g_CTRL-]</span><span class="Ignore">*</span>
g <span class="Special">CTRL-]</span>		类似于 <span class="Special">CTRL-]</span>，但使用 &quot;:tjump&quot; 而不是 &quot;:tag&quot;。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">v_g_CTRL-]</span><span class="Ignore">*</span>
<span class="Special">{Visual}</span>g <span class="Special">CTRL-]</span>	和 &quot;g <span class="Special">CTRL-]</span>&quot; 相同，但使用高亮文本作为标识符。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:tn</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:tnext</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>tn[ext][!]	跳转到向下 <span class="Special">[count]</span> 个匹配的标签 (缺省为 1)。[!] 见
			<span class="Ignore">|</span><span class="Identifier">tag-!</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:tp</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:tprevious</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>tp[revious][!]	跳转到向上 <span class="Special">[count]</span> 个匹配的标签 (缺省为 1)。[!] 见
			<span class="Ignore">|</span><span class="Identifier">tag-!</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:tN</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:tNext</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>tN[ext][!]	和 &quot;:tprevious&quot; 相同。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:tr</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:trewind</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>tr[ewind][!]	跳转到第一个匹配的标签。如果给出 <span class="Special">[count]</span>，跳到第
			<span class="Special">[count]</span> 个匹配的标签。[!] 见 <span class="Ignore">|</span><span class="Identifier">tag-!</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:tf</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:tfirst</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>tf[irst][!]	和 &quot;:trewind&quot; 相同。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:tl</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:tlast</span><span class="Ignore">*</span>
:tl[ast][!]		跳到最后匹配的标签。[!] 见 <span class="Ignore">|</span><span class="Identifier">tag-!</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:lt</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ltag</span><span class="Ignore">*</span>
:lt[ag][!] <span class="Special">[ident]</span>	跳转到标签 <span class="Special">[ident]</span> 上并在当前窗口的新位置列表中加入匹
			配的标签。
			<span class="Special">[ident]</span> 可以是正规表达式，见 <span class="Ignore">|</span><span class="Identifier">tag-regexp</span><span class="Ignore">|</span>。如果
			<span class="Special">[ident]</span> 没有给出，使用标签栈上最后的标签名。查找标签行
			的搜索模式会加上 &quot;\V&quot; 前缀，转义所有的特殊字符 (very
			nomagic)。显示匹配标签的位置列表独立于标签栈。 [!] 见
			<span class="Ignore">|</span><span class="Identifier">tag-!</span><span class="Ignore">|</span>。
			<span class="Special">{Vi 无此功能}</span>

如果没有其他消息，Vim 显示跳到的是哪个匹配的标签，还有匹配标签的总数:<span class="Ignore"> &gt;</span>
<span class="Comment">	tag 1 of 3 or more</span>
&quot; or more&quot; 用于说明 Vim 并没有尝试完所有的 tags 文件。多用几次 &quot;:tnext&quot; 或者用
&quot;:tlast&quot; 也许会找到更多。

如果因为有其他的消息使得你没看到这个消息，或者你想知道现在在哪里，以下这个命令
会再次显示本消息 (并跳转到最近一次的相同的标签):<span class="Ignore"> &gt;</span>
<span class="Comment">	:0tn</span>
<span class="Ignore">&lt;</span>
							<span class="Ignore">*</span><span class="String">tag-skip-file</span><span class="Ignore">*</span>
如果找到一个匹配的标签，但是相应的文件却不存在，该匹配被跳过，而使用下一个匹
配。Vim 报告这一点，提醒你文件的丢失。在匹配列表的结束处，会给出错误。

							<span class="Ignore">*</span><span class="String">tag-preview</span><span class="Ignore">*</span>
标签匹配表也可用在预览窗口。命令和上面一样，除了前面有个 &quot;p&quot;。
{仅当编译时加入 <span class="Ignore">|</span><span class="Identifier">+quickfix</span><span class="Ignore">|</span> 特性才有效}

							<span class="Ignore">*</span><span class="String">:pts</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ptselect</span><span class="Ignore">*</span>
:pts[elect][!] <span class="Special">[ident]</span>	&quot;:tselect[!] <span class="Special">[ident]</span>&quot; 并在预览窗口显示新的标签。详情见
			<span class="Ignore">|</span><span class="Identifier">:ptag</span><span class="Ignore">|</span>。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:ptj</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ptjump</span><span class="Ignore">*</span>
:ptj[ump][!] <span class="Special">[ident]</span>	&quot;:tjump[!] <span class="Special">[ident]</span>&quot; 并在预览窗口显示新的标签。详情见
			<span class="Ignore">|</span><span class="Identifier">:ptag</span><span class="Ignore">|</span>。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:ptn</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ptnext</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>ptn[ext][!]	在预览窗口里 &quot;:tnext&quot;。见 <span class="Ignore">|</span><span class="Identifier">:ptag</span><span class="Ignore">|</span>。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:ptp</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ptprevious</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>ptp[revious][!]	在预览窗口里 &quot;:tprevious&quot;。见 <span class="Ignore">|</span><span class="Identifier">:ptag</span><span class="Ignore">|</span>。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:ptN</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ptNext</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>ptN[ext][!]	等价于 &quot;:ptprevious&quot;。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:ptr</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ptrewind</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>ptr[ewind][!]	在预览窗口中 &quot;:trewind&quot;。见 <span class="Ignore">|</span><span class="Identifier">:ptag</span><span class="Ignore">|</span>。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:ptf</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ptfirst</span><span class="Ignore">*</span>
:<span class="Special">[count]</span>ptf[irst][!]	等价于 &quot;:ptrewind&quot;。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:ptl</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ptlast</span><span class="Ignore">*</span>
:ptl[ast][!]		在预览窗口中见 &quot;:tlast&quot;。见 <span class="Ignore">|</span><span class="Identifier">:ptag</span><span class="Ignore">|</span>。
			<span class="Special">{Vi 无此功能}</span>

<span class="PreProc">==============================================================================</span>
4. 标签细节						<span class="Ignore">*</span><span class="String">tag-details</span><span class="Ignore">*</span>

							<span class="Ignore">*</span><span class="String">static-tag</span><span class="Ignore">*</span>
静态标签是为特定文件定义的标签。在 C 程序里，这可能是一个静态函数。

Vi 里跳转某个标签的同时设置当前搜索模式。这意味着在标签跳转后，&quot;n&quot; 命令不再查
找跳转前最后使用的模式了。Vim 没有这么做，因为我们认为这是一个错误。你仍然可以
从搜索历史里查找到标签的搜索模式。如果你真的想要从前 Vi 那样的行为，在
<span class="Type">'cpoptions'</span> 里设置 't' 标志位。

							<span class="Ignore">*</span><span class="String">tag-binary-search</span><span class="Ignore">*</span>
Vim 使用二分法查找标签文件，以快速查找到希望找到的标签 (如果编译时打开
<span class="Ignore">|</span><span class="Identifier">+tag_binary</span><span class="Ignore">|</span> 特性的话)。不过这只有在 tags 文件按 ASCII 字节值排序才有效。因
此，如果没有匹配，Vim 会按照线性查找再来一次。如果你只想要线性查找。复位
<span class="Type">'tagbsearch'</span> 选项。或者更好的: 对 tags 文件排序！

注意 如果不查找特定名字，标签的查找不使用二分法查找。这包括忽略大小写的查找或
不以固定字符串开始的正规表达式的查找。这样的标签搜索可能会慢很多。前者可以用大
小写合并排序来解决。详情见 <span class="Type">'tagbsearch'</span>。

							<span class="Ignore">*</span><span class="String">tag-regexp</span><span class="Ignore">*</span>
&quot;:tag&quot; 和 &quot;:tselect&quot; 命令接受正规表达式参数。<span class="Ignore">|</span><span class="Identifier">pattern</span><span class="Ignore">|</span> 可以看到如何使用特别的
字符。如果参数以 '/' 开始，它被认为是一个模式。如果不是，它被认为是按本义出现
的完整的标签名。
示例:<span class="Ignore"> &gt;</span>
<span class="Comment">    :tag main</span>
<span class="Ignore">&lt;</span>	跳转到最高优先级的 &quot;main&quot; 标签。<span class="Ignore"> &gt;</span>
<span class="Comment">    :tag /^get</span>
<span class="Ignore">&lt;</span>	跳转到最后优先级的 &quot;get&quot; 开始的标签。<span class="Ignore"> &gt;</span>
<span class="Comment">    :tag /norm</span>
<span class="Ignore">&lt;</span>	列出所有包含 &quot;norm&quot; 的标签，例如 &quot;id_norm&quot;。
如果参数既能按本义匹配，也能按正规表达式匹配，本义匹配有更高的优先级。比如，
&quot;:tag /open&quot; 在 &quot;open_file&quot; 和 &quot;file_open&quot; 之前匹配 &quot;open&quot;。
如果使用模式，那么忽略大小写。如果你想在模式中匹配大小写，使用 &quot;\C&quot;。

							<span class="Ignore">*</span><span class="String">tag-!</span><span class="Ignore">*</span>
如果当前文件里有需要的标签，就没有问题。不然，采取的行动决定于当前文件是否发生
了改变，还有是否命令之后加了 !，还有 <span class="Type">'autowrite'</span> 选项:

<span class="PreProc">标签在		文件是		autowrite		</span><span class="Ignore">	~</span>
<span class="PreProc">当前文件里	否改变	!	选项	行动</span><span class="Ignore">	~</span>
<span class="PreProc">-----------------------------------------------------------------------------</span>
    是		x	x	x	转到标签
    否		否	x	x	读入其他文件，转到标签
    否		是	是	x	放弃当前文件，读入其他文件，转到标签
    否		是	否	开	写入当前文件，读入其他文件，转到标签
    否		是	否	关	失败
<span class="PreProc">-----------------------------------------------------------------------------</span>

- 如果标签在当前文件里，该命令总能工作。
- 如果标签在另外的文件里而当前文件没有改变。那个文件成为当前文件，并读入到缓冲
  区里。
- 如果标签在另外的文件里而当前文件发生了改变。而命令后加了 !，那么当前文件的改
  变被放弃，那个文件成为当前文件，并读入缓冲区。
- 如果标签在另外的文件里而当前文件发生了改变。而 <span class="Type">'autowrite'</span> 选项被打开，那么
  当前文件的改变被保存，那个文件成为当前文件，并读入缓冲区。
- 如果标签在另外的文件里而当前文件发生了改变。而 <span class="Type">'autowrite'</span> 选项被关闭，那么
  该命令失败。此时，如果你想保存改变，先用 &quot;:w&quot; 命令，再用不带参数的 &quot;:tag&quot;。
  这是因为标签已经在堆栈上了。如果你想放弃改变，你可以用 &quot;:tag!&quot; 命令。

							<span class="Ignore">*</span><span class="String">tag-security</span><span class="Ignore">*</span>
注意 Vim 为了安全原因禁止某些命令。这类似于在当前目录下的 exrc/vimrc 文件里使
用了 <span class="Type">'secure'</span> 选项。见 <span class="Ignore">|</span><span class="Identifier">trojan-horse</span><span class="Ignore">|</span> 和 <span class="Ignore">|</span><span class="Identifier">sandbox</span><span class="Ignore">|</span>。
如果 <span class="Special">{tagaddress}</span> 改变了缓冲区，你会得到警告:
	&quot;<span class="Todo">WARNING</span>: tag command changed a buffer!!!&quot;
在将来的版本里，也许会禁止对缓冲区的改变。这些都是为了安全原因: 有的人可能在
tags 文件里隐藏了恶意的命令。如果不这么做，你也许不能看到这一点。例如:<span class="Ignore"> &gt;</span>
<span class="Comment">	:$d|/tag-function-name/</span>
<span class="Special">{Vi 没有这个安全保护措施}</span>

Vi 里跳转某个标签的同时设置当前搜索模式。Vim 没有这么做，以前的搜索模式还是记
住的。除非 <span class="Type">'cpoptions'</span> 里设置了 't' 标志位。搜索历史里包含了这个搜索模式，所以
在搜索失败的时候你可以修改这个模式。

					<span class="Ignore">*</span><span class="String">emacs-tags</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">emacs_tags</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E430</span><span class="Ignore">*</span>
Emacs 风格的 tag 文件只有在 Vim 编译的时候加入 <span class="Ignore">|</span><span class="Identifier">+emacs_tags</span><span class="Ignore">|</span> 特性时才有效。对
不起，这里没有 Emacs 标签文件的解释，支持它只是为了后向兼容。:-)。

Emacs 标签文件的行可能很长。Vim 只处理不超过 510 字节的行。要看到哪些行被忽
略，设置 <span class="Type">'verbose'</span> 为 5 或更高。

							<span class="Ignore">*</span><span class="String">tags-option</span><span class="Ignore">*</span>
<span class="Type">'tags'</span> 选项是文件名的列表。其中的每个文件都用来搜索标签。这可以用来指定不同于
缺省的 &quot;tags&quot; 文件的标签文件。它也可以用来访问一个公用的标签文件。

下列情况下，不再查找列表中的下个文件:
- 找到了当前缓冲区的匹配的静态标签。
- 找到了全局标签。
同时也取决于是否忽略大小写。以下条件下忽略大小写:
- <span class="Type">'tagcase'</span> 为 ”followic&quot; 并且置位 <span class="Type">'ignorecase'</span>
- <span class="Type">'tagcase'</span> 为 &quot;ignore&quot;
- <span class="Type">'tagcase'</span> 为 &quot;smart&quot; 且模式只包含小写字符。
- <span class="Type">'tagcase'</span> 为 &quot;followscs&quot; 且置位 <span class="Type">'smartcase'</span> 且模式只包含小写字符。
如果不忽略大小写，而当前标签文件找到大小写不符合的匹配，那么就会查找下一个文
件。如果没有匹配大小写的标签，则使用第一个大小写不符合的匹配。如果忽略大小写，
而找到全局的匹配 (不论大小写)，则立即使用之，而无须继续查找下一个文件。

如果标签文件以 &quot;./&quot; 开始，则 '.' 会被替代成当前的文件所在的路径。这样，你可以
使用当前文件所在的目录下的标签文件 (无论当前目录在哪里)。使用 &quot;./&quot; 的逻辑是，
你可以定义哪个标签文件最先查找: 先当前目录 (&quot;tags,./tags&quot;)，还是先当前文件所处
的目录 (&quot;./tags,tags&quot;)。

例如:<span class="Ignore"> &gt;</span>
<span class="Comment">	:set tags=./tags,tags,/home/user/commontags</span>

在这个例子里，先查找当前文件所处目录的 &quot;tags&quot; 文件。再查找当前目录下的 &quot;tags&quot;
文件。如果没有，再查找 &quot;/home/user/commontags&quot;。

要 Vi 兼容，可以在 <span class="Type">'cpoptions'</span> 里包含 'd' 标志位。这样，&quot;./tags&quot; 会是当前目录
下的 tags 文件，而不是当前文件所在的目录下的。

除了逗号以外，也可以用空格。而在字符串值的选项里，空格需要用反斜杠转义:<span class="Ignore"> &gt;</span>
<span class="Comment">	:set tags=tags\ /home/user/commontags</span>

这样，要在文件名里包含空格，需要三个反斜杠。要在文件名里包含逗号，需要两个反斜
杠。例如，可以用:<span class="Ignore"> &gt;</span>
<span class="Comment">	:set tags=tag\\\ file,/home/user/common\\,tags</span>

来指定文件 &quot;tag file&quot; 和 &quot;/home/user/common,tags&quot;。<span class="Type">'tags'</span> 选项会包含值
&quot;tag\ file,/home/user/common\,tags&quot;。

如果打开 <span class="Type">'tagrelative'</span> 选项 (这是缺省值) 而使用别的目录的标签文件，该标签文件
所引用的文件名相对于标签文件本身所处的目录。

<span class="PreProc">==============================================================================</span>
5. 标签文件格式					<span class="Ignore">*</span><span class="String">tags-file-format</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E431</span><span class="Ignore">*</span>

						<span class="Ignore">*</span><span class="String">ctags</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">jtags</span><span class="Ignore">*</span>
标签文件是外部程序创建的，比如 &quot;ctags&quot;。对每个函数，它会包含一个标签。有些版本
的 &quot;ctags&quot; 会为每个 &quot;#define&quot; 宏、类型等价定义 (typedef)、枚举 (enum) 等也创建
标签。

能产生标签文件的程序有:
ctags			大多数 Unix 系统都能找到。只支持 C。只有基本的功能。
							<span class="Ignore">*</span><span class="String">Exuberant_ctags</span><span class="Ignore">*</span>
exuberant ctags		这是很好的一个。它支持 C、C++、Java、Fortran、Eiffel
			等等。它能为很多项目产生标签。见
			<span class="String"><a href="http://ctags.sourceforge.net">http://ctags.sourceforge.net</a></span>。
etags			和 Emacs 有关。支持很多语言。
JTags			用 Java 编写，为 Java 而设计。可以在这里找到:
			<span class="String"><a href="http://www.fleiner.com/jtags/">http://www.fleiner.com/jtags/</a></span>。
ptags.py		用 Python 编写，为 Python 而设计。它位于你的 Python 源
			代码目录 Tools/scripts/ptags.py。
ptags			用 Perl 编写，为 Perl 而设计。可以在这里找到:
			<span class="String"><a href="http://www.eleves.ens.fr:8080/home/nthiery/Tags/">http://www.eleves.ens.fr:8080/home/nthiery/Tags/</a></span>。
gnatxref		为 Ada 而设计。见 <span class="String"><a href="http://www.gnuada.org/。gnatxref">http://www.gnuada.org/。gnatxref</a></span> 是
			gnat 包的一部分。


标签文件的行应是以下三种格式之一:

1.  <span class="Special">{tagname}</span>		<span class="Special">{TAB}</span> <span class="Special">{tagfile}</span> <span class="Special">{TAB}</span> <span class="Special">{tagaddress}</span>
2.  <span class="Special">{tagfile}</span>:<span class="Special">{tagname}</span> <span class="Special">{TAB}</span> <span class="Special">{tagfile}</span> <span class="Special">{TAB}</span> <span class="Special">{tagaddress}</span>
3.  <span class="Special">{tagname}</span>		<span class="Special">{TAB}</span> <span class="Special">{tagfile}</span> <span class="Special">{TAB}</span> <span class="Special">{tagaddress}</span> <span class="Special">{term}</span> <span class="Special">{field}</span> ..

第一个是普通的标签，和 Vi 完全兼容。传统的 ctags 实现只能产生这种格式。通常，
这用于被别的文件所引用的全局函数，

标签文件行可以用 <span class="Special">&lt;LF&gt;</span> 或者 <span class="Special">&lt;CR&gt;&lt;LF&gt;</span> 结尾。在 Macintosh 上，<span class="Special">&lt;CR&gt;</span> 也能工作。<span class="Special">&lt;CR&gt;</span>
和 <span class="Special">&lt;NL&gt;</span> 字符不应该在行内出现。

							<span class="Ignore">*</span><span class="String">tag-old-static</span><span class="Ignore">*</span>
第二个格式只限于静态标签。现在已经废弃了，被第三个格式取而代之。只有 Elvis
1.x, Vim 还有很少的 ctags 版本支持。静态变量用于本地函数，只有文件 <span class="Special">{tagfile}</span>
才引用。注意 对静态变量而言，<span class="Special">{tagfile}</span> 的两次出现必须完全一致。关于如何使用静
态变量，见下面的 <span class="Ignore">|</span><span class="Identifier">tags-option</span><span class="Ignore">|</span>。

第三个格式是新出现的。它在每行尾部的可选字段上包含了附加的信息。它和 Vi 后向兼
容。只有新的 ctags 版本 (比如 Exuberant ctags) 才支持这种格式。

<span class="Special">{tagname}</span>	标识符。通常是函数的名字，但可以是任何标识符。不能包含 <span class="Special">&lt;Tab&gt;</span>。
<span class="Special">{TAB}</span>		单个 <span class="Special">&lt;Tab&gt;</span> 字符。注意: 以前的版本允许任意多个空白字符。现在不
		支持，因为 <span class="Special">{tagfile}</span> 里可能包含空格。编译时加入
		<span class="Ignore">|</span><span class="Identifier">+tag_any_white</span><span class="Ignore">|</span> 特性可以重新打开这个功能。 <span class="Ignore">*</span><span class="String">tag-any-white</span><span class="Ignore">*</span>
<span class="Special">{tagfile}</span>	包含 <span class="Special">{tagname}</span> 定义的文件。可以是绝对路径或者相对路径。还可以
		包含环境变量甚至通配符 (尽管使用通配符很值得怀疑)。它不能包含
		<span class="Special">&lt;Tab&gt;</span>。
<span class="Special">{tagaddress}</span>	可以定位到 tag 的光标位置的 Ex 命令。可以是任何 Ex 命令，尽管
		有一些限制 (见 <span class="Ignore">|</span><span class="Identifier">tag-security</span><span class="Ignore">|</span>)。Posix 只允许行号和搜索命令，这
		也是最常用的。
<span class="Special">{term}</span>		;&quot; 分号和双引号两个字符。这被 Vi 解释为注释的开始，从而忽略其
		后的部分。这样，就能和 Vi 后向兼容，因为 Vi 忽略后面的字段。
<span class="Special">{field}</span> ..	可选的字段列表。每个字段有以下形式:

			<span class="Special">&lt;Tab&gt;{fieldname}</span>:<span class="Special">{value}</span>

		<span class="Special">{fieldname}</span> 标识字段，并且只能包含字母 <span class="Special">[a-zA-Z]</span>。
		<span class="Special">{value}</span> 可以使任何字符串，但不能包含 <span class="Special">&lt;Tab&gt;</span>。
		以下字符有特殊含义:
			&quot;\t&quot; 代表 <span class="Special">&lt;Tab&gt;</span>
			&quot;\r&quot; 代表 <span class="Special">&lt;CR&gt;</span>
			&quot;\n&quot; 代表 <span class="Special">&lt;NL&gt;</span>
			&quot;\\&quot; 代表单个 '\' 字符

		有一个字段不需要 ':'。那就是标签的类型。它的处理方式就像前面
		有 &quot;kind:&quot; 开头那样。ctags 能产生的类型见它的文档。

		唯一的 Vim 能识别的其他字段是 &quot;file:&quot; (带一个空值)。用于静态变
		量。

标签文件的开头可以包含这样开始的行:
	!_TAG_
排序以后，他们一般都排在最前面。只有很少的以 &quot;!&quot; 开头的标签能排在他们前面。Vim
识别两项。第一个是指示文件是否排序的标志。如果找到这么一行，Vim 使用二分法查找
标签文件:
	<span class="PreProc">!_TAG_FILE_SORTED&lt;Tab&gt;1&lt;Tab&gt;{anything}</span><span class="Ignore"> ~</span>

标签文件可以按大小写合并排序，以免忽略大小写时只能进行线性查找 (<span class="Type">'ignorecase'</span>
置位且 <span class="Type">'tagcase'</span> 为 &quot;followic&quot; 或 <span class="Type">'tagcase'</span> 为 &quot;ignore&quot; 时忽略大小写)。详情见
<span class="Type">'tagbsearch'</span>。这时可以用值 2:
	<span class="PreProc">!_TAG_FILE_SORTED&lt;Tab&gt;2&lt;Tab&gt;{anything}</span><span class="Ignore"> ~</span>

另一个 Vim 识别的标签，只有在编译时带了 <span class="Ignore">|</span><span class="Identifier">+multi_byte</span><span class="Ignore">|</span> 特性才有效。它指定标签文
件的编码:
	<span class="PreProc">!_TAG_FILE_ENCODING&lt;Tab&gt;utf-8&lt;Tab&gt;{anything}</span><span class="Ignore"> ~</span>
这里 &quot;utf-8&quot; 是标签们所用的编码。Vim 会把查找的标签从 <span class="Type">'encoding'</span> 转为标签文件
的编码。当列出标签时，则反之。如果转换失败，则直接使用未经转换的标签。

							<span class="Ignore">*</span><span class="String">tag-search</span><span class="Ignore">*</span>
标签搜索命令可以是任何 Ex 命令，但通常就是普通的搜索命令。比如:
	<span class="PreProc">tag1	file1	/^main(argc, argv)/</span><span class="Ignore"> ~</span>
	<span class="PreProc">tag2	file2	108</span><span class="Ignore"> ~</span>

该命令执行时总假设不设定 <span class="Type">'magic'</span>。搜索模式里仅有的特别的字符是 &quot;^&quot; (行首) 和
&quot;$&quot; (<span class="Special">&lt;EOL&gt;</span>)。见 <span class="Ignore">|</span><span class="Identifier">pattern</span><span class="Ignore">|</span>。注意，你必须在搜索文本里的每个反斜杠前加上反斜杠。
这和 Vi 反向兼容。

							<span class="Ignore">*</span><span class="String">E434</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E435</span><span class="Ignore">*</span>
如果该命令是一个普通的搜索命令 (也就是，以 &quot;/&quot; 或 &quot;?&quot; 开头和结尾)，会进行一些
特殊处理:
- 搜索从文件第 1 行开始。
  如果用 &quot;/&quot;，搜索方向为正向，&quot;?&quot; 则为反向。
  注意 <span class="Type">'wrapscan'</span> 没有影响，总是搜索整个文件。<span class="Special">{Vi 使用 'wrapscan'，使得有时标</span>
  <span class="Special">签可能找不到}</span>。<span class="Special">{Vi 从别的文件的第二行开始搜索。如果没有置位 'wrapscan'，它不</span>
  <span class="Special">会去找别的文件的第一行的标签}</span>
- 如果搜索失败，忽略大小写再重新尝试一次。如果还不行，搜索:
	&quot;^tagname[ \t]*(&quot;
  (实际的标签前面加上 '^' 而后面加上 &quot;[ \t]*(&quot;)。应用函数名的时候，它会找到在
  第 0 列的函数名。这会有助于找到该函数，即使它的参数和生成 tags 文件时有差
  异。如果还不行，进行另外一个搜索:
	&quot;^[#a-zA-Z_].*\&lt;tagname[ \t]*(&quot;
  这意味着: 以 '#' 或者一个标识符开始的一行，包含标签本身，后面紧跟空白和一个
  '('。这会找到宏名和前面有返回类型的函数名。<span class="Special">{Vi 没有这些额外的搜索}</span>

<span class="PreProc">==============================================================================</span>
6. 头文件搜索				<span class="Ignore">*</span><span class="String">include-search</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">definition-search</span><span class="Ignore">*</span>
							<span class="Ignore">*</span><span class="String">E387</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E388</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">E389</span><span class="Ignore">*</span>

这些命令递归地查找当前文件和所有遇到的头文件的一个字符串。这可以用来查找变量的
定义，函数或者宏。如果只想查找当前缓冲区，用 <span class="Ignore">|</span><span class="Identifier">pattern-searches</span><span class="Ignore">|</span> 列出来的命令。

这些命令只有在编译时加入 <span class="Ignore">|</span><span class="Identifier">+find_in_path</span><span class="Ignore">|</span> 特性才会有效。

如果一个文件的某行包含另一个文件，那么那个文件在当前缓冲区继续之前先进行搜索。
头文件里包含的头文件也会被搜索。当头文件找不到时，它被悄悄地忽略掉。用
<span class="Ignore">|</span><span class="Identifier">:checkpath</span><span class="Ignore">|</span> 命令检查哪些文件可能找不到。是不是因为你的 <span class="Type">'path'</span> 选项没有设对。
注意: 被搜索的是头文件本身，不是可能正在编辑它的缓冲区。只有当前的文件除外，它
使用缓冲区里的行。

字符串可能是任何的关键字或者定义的宏。对于关键字，任何匹配都会找到。对于定义的
宏，只有用匹配 <span class="Type">'define'</span> 选项的行才会被找到。它的缺省值是 &quot;^#\s*define&quot;。这对 C
程序适用，对于其它语言你可能想改变之。C++ 的一个例子见 <span class="Type">'define'</span>。该字符串不能
包含换行符，只能匹配一行之内的文本。

如果找到一个定义的宏的匹配，并且该行以反斜杠结尾的话。行的显示在下一行继续。

&quot;[&quot; 开头的命令从当前文件开始查找。&quot;]&quot; 开始的命令从当前光标位置开始。

<span class="Type">'include'</span> 选项用于定义可以包含另一个文件的行。缺省是 &quot;\^#\s*include&quot;。它适用于
C 程序。注意: Vim 并不试图识别 C 语法。如果 <span class="Type">'include'</span> 选项在 #ifdef/#endif 之
间或者注释内的一行上匹配，它也会被搜索到。<span class="Type">'isfname'</span> 选项用于识别匹配之后的文件
名。

<span class="Type">'path'</span> 选项用于查找不含绝对路径的头文件所在的目录。

<span class="Type">'comments'</span> 选项用来显示或者跳转到一行的命令。如果定义的模式可能包含注释，这些
行用来跳过搜索，除非使用 [!]。一个特例: 如果一行匹配模式 &quot;^# *define&quot;，它不会
被认为是注释。

如果你想列出所有的匹配，然后选择一个并跳转之，你可以使用一个映射来做这件事。这
里是一个例子:<span class="Ignore"> &gt;</span>

<span class="Comment">  :map &lt;F4&gt; [I:let nr = input(&quot;Which one: &quot;)&lt;Bar&gt;exe &quot;normal &quot; . nr .&quot;[\t&quot;&lt;CR&gt;</span>
<span class="Ignore">&lt;</span>
							<span class="Ignore">*</span><span class="String">[i</span><span class="Ignore">*</span>
[i			显示第一个包含光标所在的关键字的行。搜索从文件开头开
			始。看起来像注释的行被忽略 (见 <span class="Type">'comments'</span> 选项)。如果
			给出一个计数，跳转到第 count 个匹配的行，注释行不忽
			略。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">]i</span><span class="Ignore">*</span>
]i			类似于 &quot;[i&quot;，但是从当前光标位置开始。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:is</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:isearch</span><span class="Ignore">*</span>
:<span class="Special">[range]</span>is[earch][!] <span class="Special">[count]</span> [/]pattern[/]
			类似于 &quot;[i&quot; 和 &quot;]i&quot;，但在 <span class="Special">[range]</span> 行范围搜索 (缺省: 整
			个文件)。
			关于 [/] 和 [!] 见 <span class="Ignore">|</span><span class="Identifier">:search-args</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">[I</span><span class="Ignore">*</span>
[I			显示包含光标下的关键字的所有的行。找到的每行都显示文件
			名和行号。搜索从文件头开始。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">]I</span><span class="Ignore">*</span>
]I			类似于 &quot;[I&quot;，但是从当前光标位置开始。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:il</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ilist</span><span class="Ignore">*</span>
:<span class="Special">[range]</span>il[ist][!] [/]pattern[/]
			类似于 &quot;[I&quot; 和 &quot;]I&quot;，但在 <span class="Special">[range]</span> 行范围搜索 (缺省:
			整个文件)。
			关于 [/] 和 [!] 见 <span class="Ignore">|</span><span class="Identifier">:search-args</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">[_CTRL-I</span><span class="Ignore">*</span>
[ <span class="Special">CTRL-I</span>		跳转到第一个包含光标所在的关键字的行。搜索从文件开头开
			始。看起来像注释的行被忽略 (见 <span class="Type">'comments'</span> 选项)。如果
			给出一个计数，跳转到第 count 个匹配的行，注释行不忽
			略。<span class="Special">{Vi 无此功能}</span>


							<span class="Ignore">*</span><span class="String">]_CTRL-I</span><span class="Ignore">*</span>
] <span class="Special">CTRL-I</span>		类似于 &quot;[ <span class="Special">CTRL-I</span>&quot;，但是从当前光标位置开始。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:ij</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:ijump</span><span class="Ignore">*</span>
:<span class="Special">[range]</span>ij[ump][!] <span class="Special">[count]</span> [/]pattern[/]
			类似于 &quot;[ <span class="Special">CTRL-I</span>&quot;  和 &quot;] <span class="Special">CTRL-I</span>&quot;，但在 <span class="Special">[range]</span> 行范围
			搜索 (缺省: 整个文件)。
			关于 [/] 和 [!] 见 <span class="Ignore">|</span><span class="Identifier">:search-args</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

<span class="Special">CTRL-W</span> <span class="Special">CTRL-I</span>					<span class="Ignore">*</span><span class="String">CTRL-W_CTRL-I</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">CTRL-W_i</span><span class="Ignore">*</span>
<span class="Special">CTRL-W</span> i		打开一个新窗口，把光标放在第一个包含光标所在的关键字的
			行。搜索从文件开头开始。看起来像注释的行被忽略 (见
			<span class="Type">'comments'</span> 选项)。如果给出一个计数，跳转到第 count 个
			匹配的行，注释行不忽略。 <span class="Special">{Vi 无此功能}</span>


							<span class="Ignore">*</span><span class="String">:isp</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:isplit</span><span class="Ignore">*</span>
:<span class="Special">[range]</span>isp[lit][!] <span class="Special">[count]</span> [/]pattern[/]
			类似于 &quot;<span class="Special">CTRL-W</span> i&quot;  和 &quot;<span class="Special">CTRL-W</span> i&quot;，但在 <span class="Special">[range]</span> 行范围
			搜索 (缺省: 整个文件)。
			关于 [/] 和 [!] 见 <span class="Ignore">|</span><span class="Identifier">:search-args</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>


							<span class="Ignore">*</span><span class="String">[d</span><span class="Ignore">*</span>
[d			显示第一个包含光标所在的关键字的宏定义。搜索从文件头
			开始。如果给出一个计数，跳转到第 count 个匹配的行。
			<span class="Special">{Vi 无此功能}</span>


							<span class="Ignore">*</span><span class="String">]d</span><span class="Ignore">*</span>
]d			类似于 &quot;[d&quot;，但是从当前光标位置开始。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:ds</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:dsearch</span><span class="Ignore">*</span>
:<span class="Special">[range]</span>ds[earch][!] <span class="Special">[count]</span> [/]string[/]
			类似于 &quot;[d&quot;  和 &quot;]d&quot;，但在 <span class="Special">[range]</span> 行范围搜索 (缺省:
			整个文件)。
			关于 [/] 和 [!] 见 <span class="Ignore">|</span><span class="Identifier">:search-args</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">[D</span><span class="Ignore">*</span>
[D			显示包含光标下的宏的所有的宏定义。找到的每行都显示文件
			名和行号。搜索从文件头开始。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">]D</span><span class="Ignore">*</span>
]D			类似于 &quot;[D&quot;，但是从当前光标位置开始。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:dli</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:dlist</span><span class="Ignore">*</span>
:<span class="Special">[range]</span>dli[st][!] [/]string[/]
			类似于 <span class="Ignore">`</span><span class="Comment">[D</span><span class="Ignore">`</span> 和 <span class="Ignore">`</span><span class="Comment">]D</span><span class="Ignore">`</span>，但在 <span class="Special">[range]</span> 行范围搜索 (缺省: 整
			个文件)。
			关于 [/] 和 [!] 见 <span class="Ignore">|</span><span class="Identifier">:search-args</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>
			注意 <span class="Ignore">`</span><span class="Comment">:dl</span><span class="Ignore">`</span> 功能等同带 &quot;l&quot; 标志位的 <span class="Ignore">`</span><span class="Comment">:delete</span><span class="Ignore">`</span>，而不是
			<span class="Ignore">`</span><span class="Comment">:dlist</span><span class="Ignore">`</span>。


							<span class="Ignore">*</span><span class="String">[_CTRL-D</span><span class="Ignore">*</span>
[ <span class="Special">CTRL-D</span>		跳转到第一个包含光标所在的关键字的宏定义。搜索从文件头
			开始。如果给出一个计数，跳转到第 count 个匹配的行。
			<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">]_CTRL-D</span><span class="Ignore">*</span>
] <span class="Special">CTRL-D</span>		类似于 &quot;[ <span class="Special">CTRL-D</span>&quot;，但是从当前光标开始。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:dj</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:djump</span><span class="Ignore">*</span>
:<span class="Special">[range]</span>dj[ump][!] <span class="Special">[count]</span> [/]string[/]
			类似于 &quot;[ <span class="Special">CTRL-D</span>&quot;  和 &quot;] <span class="Special">CTRL-D</span>&quot;，但是在 <span class="Special">[range]</span> 行范
			围内搜索 (缺省: 整个文件)。
			关于 [/] 和 [!] 见 <span class="Ignore">|</span><span class="Identifier">:search-args</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>


<span class="Special">CTRL-W</span> <span class="Special">CTRL-D</span>					<span class="Ignore">*</span><span class="String">CTRL-W_CTRL-D</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">CTRL-W_d</span><span class="Ignore">*</span>
<span class="Special">CTRL-W</span> d		打开一个新窗口，把光标放在第一个包含光标所在的关键字的
			宏定义行。搜索从文件头开始。如果给出一个计数，跳转到第
			count 个匹配的行。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:dsp</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:dsplit</span><span class="Ignore">*</span>
:<span class="Special">[range]</span>dsp[lit][!] <span class="Special">[count]</span> [/]string[/]
			类似于 &quot;<span class="Special">CTRL-W</span> d&quot;，但是在 <span class="Special">[range]</span> 行范围内查找
			(缺省: 整个文件)。
			关于 [/] 和 [!] 见 <span class="Ignore">|</span><span class="Identifier">:search-args</span><span class="Ignore">|</span>。<span class="Special">{Vi 无此功能}</span>

							<span class="Ignore">*</span><span class="String">:che</span><span class="Ignore">*</span> <span class="Ignore">*</span><span class="String">:checkpath</span><span class="Ignore">*</span>
:che[ckpath]		列出所有找不到的头文件。<span class="Special">{Vi 无此功能}</span>

:che[ckpath]!		列出所有的头文件。<span class="Special">{Vi 无此功能}</span>

								<span class="Ignore">*</span><span class="String">:search-args</span><span class="Ignore">*</span>
以上命令通用的参数:
[!]	如果包含，查找包括识别为注释的匹配。如果不包含，则被识别为注释 (根据
	<span class="Type">'comments'</span> ) 或者是一个 C 注释 (&quot;//&quot; 之后或者 /* */ 之间) 的行不参加匹
	配。注意 如果一行被识别为注释，但是注释在行中间结束，匹配可能丢失。另
	外，如果一行是注释，但是没有被识别 (根据 <span class="Type">'comments'</span>)，还是可能从中找到
	匹配。例子:<span class="Ignore"> &gt;</span>
<span class="Comment">		/* comment</span>
<span class="Comment">		   foobar */</span>
<span class="Ignore">&lt;</span>	还是可以找到 &quot;foobar&quot; 的匹配，因为该行没有被识别为注释 (即使语法高亮能
	够识别)。
	注意: 因为宏定义一般看起来不像注释，[!] 对 &quot;:dlist&quot;、&quot;:dsearch&quot; 和
	&quot;:djump&quot; 没有影响。
[/]	模式可以被 '/' 包围。没有 '/' 的话，只有完整单词的匹配，就像使用模式
	&quot;\&lt;pattern\&gt;&quot; 那样。只有在第二个 '/' 之后，下一个命令才可以通过 '|' 附
	加在后。例如:<span class="Ignore"> &gt;</span>
<span class="Comment">	:isearch /string/ | echo &quot;the last one&quot;</span>
<span class="Ignore">&lt;</span>	对于 &quot;:djump&quot;、&quot;:dsplit&quot;、&quot;:dlist&quot; 和 &quot;:dsearch&quot; 命令，模式是按本义理
	解的字符串，而不是搜索模式。

 vim&#0058;tw=78:ts=8:ft=help:norl:
</pre>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
